language: go
go:
- 1.12.x
services:
- docker
install:
- go get
before_script:
- CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -tags netgo -ldflags '-w' -o traffic-monitor
script:
- go test
deploy:
  provider: script
  skip_cleanup: true
  script: bash ./deploy.sh
  on:
    branch: master
    tags: true
env:
  global:
  - GO111MODULE=on
  - secure: wnurEt/y/yXs0JbQ6CdnRm6TcGDOZ1SQww5iNiUnYwaS3tuff27bY21N74eBImxVw3jYratVbiDTav6w2y75VI2bFDeMH6EIl6uBnbWwYI3DpXWyUkHUAN+5N8trPTUMonnPoduAgwQAw3dH41OWrfTdaX8n8Pqnm/aMPeQ2tP5lpvev7ouVWFIB5EwWgWdNcfMFqnP5PXOiuWk6YG0YGMNwlecu0g1/EXiKn7oKbaNZLUNCgslnMLJhYVSQg0OaNiMVOcfNBfdhoxZmNWzBJerPSa+c2rUTbusUOocKU3lTLfT+ucnnSpUue03mkYvIcdSSxZbPx3MS6tk9YSIHdGXOY4r9fk9RS36YwmNmgVdC9IkK/ShXBqnNF2GHg6lLSMvpnIM1HNsqajysFT7uXy2l2fiuNgrFB9Tfe42EioOxHX4j6nVG5dOZS2GFXCRq0CqqZdUG9MzXl5Ko7Kf4FrNfZEIYqI1YKPUGDwU0oR570vlW/WtV0/DjkfAks4TlNifgsMUVyn/58dmjvwjb+R5qltFlsnV+/8RDVid3UAAqxE1mVzafbkAh5m45L/h6izeoTu84Qhbej13MQhHUjJ1xIc/0A8a97bmoFxiZTAujsSE8Cm4BatarcN5X70tF2dGuhIsbOxGKzWVFwemvUI4Z2R95TPMOeFYw0Alh7BM=
  - secure: CKFYPv+N+B2Bxw8w7pbx3SXfmmbLH1Emhc1XL/R9XP78ahpVEQlRUnPg4/ZQ6Qt2uhWuLwhDufaT+vChaWPwAM8oIoWqK/8NYlv54NemgupyCv9QxYI/s05pPzgLM6Duw8EoZNp8gkpcXKftUREVFWJMttz7yfvF0HeJJL055ccb9+KCLWu65U2o7TZ05FE1k7OZ+yU2T4yxhOnMJhmaKq0vrWIB5rxi7/KiPObbTZqPuTClGBHpUYAPEP2Vzpc42aUhXivTBZadyMi5OZigj/8Zo1dcjGFLMTTKKopfsmTiLuGsQBGJYcsEqHdA0aqa0joPDjMyjhjJzmDZADnv3WnrP3MueIPDbX+vdLV94pZetJOBN5YwqcuLUxB66SqSC6Ypj6QBloENxJ7CXUMSIxg2k4No3HFrQ9CLK9aqNfSIgy2QJ7bZGdHqV+5wikR75LiH1mFbmzBLgz39Wh4CxP6LKNdaIt8iTbm0+RPcxXvYsUKZL8Q5drh/BmngzFF8NtzY15eVq6nvNrn52EGfEm+5+pPFF2bOw4fLJ6BsaMYKifV4O5DOk2pr4rnq+fcuNQvlQV1/EVifTg3lVo275RYF9J7DeVPOtlMOElNLMhGwPwfD+qIGXiY0VeHWmkQTUyEsAMHQo/59Rt54sk0DB5aZyRCGOZZFQjHC/hsptq4=
